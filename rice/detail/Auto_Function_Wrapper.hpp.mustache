#ifndef Rice__detail__Auto_Function_Wrapper__hpp_
#define Rice__detail__Auto_Function_Wrapper__hpp_

// This is a generated file.  DO NOT EDIT!!


// This causes problems with certain C++ libraries
#undef TYPE

#include "Exception_Handler_defn.hpp"

namespace Rice
{

namespace detail
{

#ifdef DOXYGEN

#else

{{#reverse_entries}}
template<typename Func_T, typename Ret_T, {{typenames_with_return}}>
class Auto_Function_Wrapper{{{specs_with_return}}}
  : public Wrapped_Function
{
public:
  typedef Func_T Func;

  static const int Num_Args = {{num_args}};

  Auto_Function_Wrapper(
      Func func,
      Data_Object<Exception_Handler> handler,
      Arguments* arguments = 0);

  ~Auto_Function_Wrapper();

  static VALUE call(int argc, VALUE* args, VALUE self);

private:
  Func func_;
  Data_Object<Exception_Handler> handler_;
  Address_Registration_Guard handler_guard_;
  Arguments* arguments_;
};

template<typename Func_T, {{typenames}}>
class Auto_Function_Wrapper{{{specs}}}
  : public Wrapped_Function
{
public:
  typedef Func_T Func;

  static const int Num_Args = {{num_args}};

  Auto_Function_Wrapper(
      Func func,
      Data_Object<Exception_Handler> handler,
      Arguments* arguments = 0);

  ~Auto_Function_Wrapper();

  static VALUE call(int argc, VALUE* args, VALUE self);

private:
  Func func_;
  Data_Object<Exception_Handler> handler_;
  Address_Registration_Guard handler_guard_;
  Arguments* arguments_;
};

// ---------------------------------------------------------------------
{{/reverse_entries}}

template<typename Func_T, typename Ret_T>
class Auto_Function_Wrapper<Func_T, Ret_T>
  : public Wrapped_Function
{
public:
  // typedef void (*Func)();
  typedef Func_T Func;

  static const int Num_Args = 0;

  Auto_Function_Wrapper(
      Func func,
      Data_Object<Exception_Handler> handler,
      Arguments* arguments = new Arguments());

  ~Auto_Function_Wrapper();

  static VALUE call();

private:
  Func func_;
  Data_Object<Exception_Handler> handler_;
  Arguments* arguments_;
};

template<typename Func_T>
class Auto_Function_Wrapper<Func_T, void>
  : public Wrapped_Function
{
public:
  // typedef void (*Func)();
  typedef Func_T Func;

  static const int Num_Args = 0;

  Auto_Function_Wrapper(
      Func func,
      Data_Object<Exception_Handler> handler,
      Arguments* arguments = new Arguments());

  ~Auto_Function_Wrapper();

  static VALUE call();

private:
  Func func_;
  Data_Object<Exception_Handler> handler_;
  Arguments* arguments_;
};

#endif // DOXYGEN

} // namespace detail

} // namespace Rice

#include "Auto_Function_Wrapper.ipp"

#endif // Rice__detail__Auto_Function_Wrapper__hpp_

